apiVersion: template.openshift.io/v1
kind: Template
parameters:
- name: OPENSHIFT_MAJOR_MINOR_VERSION
  value: "4.16"
metadata:
  name: selectorsyncset-template
objects:
- apiVersion: hive.openshift.io/v1
  kind: SelectorSyncSet
  metadata:
    name: managed-release-bundle-gate
  spec:
    clusterDeploymentSelector:
      matchLabels:
        api.openshift.com/managed: 'true'
      matchExpressions:
        - key: hive.openshift.io/version-major-minor
          operator: In
          values:
            - "${OPENSHIFT_MAJOR_MINOR_VERSION}"
    resourceApplyMode: Sync
    resources:
    - apiVersion: batch/v1
      kind: Job
      metadata:
        name: rvmo-gate
        namespace: ...
      spec:
        template:
          spec:
            containers:
            - name: test
              image: ubi8/ubi-minimal:latest
              command: ["sh", "-c", "exit 0"]
              securityContext:
                runAsNonRoot: true
                allowPrivilegeEscalation: false
                capabilities:
                  drop: ["ALL"]
                seccompProfile:
                  type: RuntimeDefault
            restartPolicy: Never
